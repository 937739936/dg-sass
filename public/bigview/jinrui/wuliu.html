<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>数链科技-大宗商品数字供应链服务平台</title>
    <meta name="description" content="打造全球领先的大宗商品数字供应链服务平台：依托大宗商品实时交易数字化，构建可信的数字资产，实现资产和资金的精准对接。
">
    <meta name="keywords" content="数链科技,数字供应链,金融科技,大宗商品,产业数字化,人工智能,大数据,区块链,供应链金融,大宗融资,贸易融资,煤炭托盘,煤炭仓储,钢材托盘,钢材垫资,钢材仓储,煤炭应收,钢材代采,煤炭仓押,钢铁代采,钢铁资金预付,钢材资金预付,煤炭垫资,钢铁托盘,钢铁仓押,煤炭应收账款,煤炭资金预付,煤炭预付,煤炭代采,钢材预付,钢铁预付,钢材仓押,钢铁垫资,钢铁仓储">

    <script src="../../jquery.min.js"></script>
    <script src="../../echarts.min.js"></script>
    <script src="../../china.js"></script>
    <style>
        .one-line {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        * {
            margin: 0;
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            /* Firefox */
            -webkit-box-sizing: border-box;
            /* Safari */
        }

        body,
        html {
            height: 100%;
            width: 100%;
            padding: 0;
            margin: 0;
            background-color: #101216;
        }

        body {
            background-image: url('../imgs/map-bg-c.png');
            background-size: 100% 100%;
        }

        #main-box {
            width: 1920px;
            height: 1080px;
            transform-origin: 0 0;
            overflow: hidden;
            position: absolute;
            left: 0;
            right: 0;
            bottom: 0;
            top: 0;
            box-sizing: border-box;
        }

        .title {
            color: #fff;
            height: 77px;
            width: 100%;
            padding: 8px 0;
            background-image: url('../imgs/sm-title-bg-k.png');
            background-size: 100% 100%;
            text-align: center;
            font-size: 36px;
            color: #FFFFFF;
            line-height: 47px;
        }

        .bottom-content {
            position: relative;
            margin-top: 12px;
            height: 990px;
        }

        .bottom-content>.content-map {
            position: absolute;
            width: 1450px;
            height: 1050px;
            top: 0px;
        }

        .bottom-content>.content-table {
            width: 460px;
            height: 440px;
            overflow: hidden;
            position: absolute;
            bottom: 80px;
            right: 40px;
        }

        .bottom-content>.content-map-detail {
            width: 460px;
            overflow: hidden;
            position: absolute;
            top: 26px;
            right: 40px;
        }

        .bottom-content>.content-table>.content-table-title,
        .bottom-content>.content-map-detail>.content-table-title {
            width: 460px;
            height: 32px;
            padding-left: 40px;
            background-image: url('../imgs/sm-table-title.png');
            background-size: 100% 100%;
            font-size: 16px;
            font-weight: 600;
            color: #FFFFFF;
            line-height: 32px;
            letter-spacing: 1px;
            text-shadow: 0px 6px 6px rgba(0, 0, 0, 0.3);
        }

        .bottom-content>.content-table>table {
            margin-top: 27px;
            width: 100%;
            font-size: 12px;
            font-weight: 400;
            line-height: 18px;
            text-align: center;
            overflow: hidden;
        }

        .bottom-content>.content-map-detail>.content-map-detail-main {
            margin-top: 27px;
            width: 100%;
            height: 310px;
            position: relative;
        }

        .content-map-detail-main>.content-map-detail-title {
            min-width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            height: 36px;
            width: 100%;
            font-size: 14px;
            font-family: PingFangSC-Medium, PingFang SC;
            font-weight: 500;
            color: #E7FFCA;
            line-height: 20px;
            z-index: 20;
        }

        .content-map-detail-title>.detail-title {
            height: 100%;
            min-width: 100%;
            background: rgba(97, 218, 215, 0.25);
            display: -webkit-box;
            display: -webkit-flex;
            display: -ms-flexbox;
            dispiay: flex;
            display: inline-flex;
            justify-content: space-between;
            align-items: center;
            white-space: nowrap;
        }

        .content-map-detail-title>.detail-title>div {
            padding: 0 12px;
        }

        .content-map-detail-main>#content-map-detail {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 10;
        }

        .bottom-content>.content-table>.table {
            margin-top: 0;
        }

        .bottom-content>.content-table>table thead {
            color: #66D9FF;
            display: table;
            width: 100%;
            padding: 8px 0;
            table-layout: fixed;
            background: rgba(255, 255, 255, 0.13);
        }

        .bottom-content>.content-table>table tbody {
            color: #FFFFFF;
            display: block;
            position: relative;
        }

        ::-webkit-scrollbar {
            display: none;
        }

        .bottom-content>.content-table>table tbody tr {
            display: table;
            width: 100%;
            table-layout: fixed;
            padding: 8px 0;
        }

        .bottom-content>.content-table>table tbody tr:nth-child(odd) {
            background: rgba(19, 135, 228, 0.08);
        }

        .bottom-content>.content-table>table tbody tr:nth-child(even) {
            background: rgba(255, 255, 255, 0.09);
        }

        .sm-bottom-tag {
            width: 100%;
            height: 37px;
            background-image: url('../imgs/sm-bottom-tag.png');
            background-size: 100% 100%;
            position: absolute;
            left: 0;
            bottom: 10px;
        }
    </style>
</head>

<body>
    <div id="main-box">
        <div class="title">晋瑞能源供应链物流动态</div>
        <div class="bottom-content">
            <div class="content-map" id="content-map"></div>
            <div class="content-map-detail">
                <div class="content-table-title">
                    批次号:<span id="batchNo"></span>
                </div>
                <div class="content-map-detail-main">
                    <div class="content-map-detail-title">
                        <div class="detail-title" id="detailTitle">
                        </div>
                    </div>
                    <div id="content-map-detail"></div>
                </div>
            </div>
            <div class="content-table">
                <div class="content-table-title">
                    在途货物明细
                </div>
                <table cellspacing="0" cellpadding="0">
                    <thead>
                        <tr>
                            <td>发站</td>
                            <td>到站</td>
                            <td>货物数量(吨)</td>
                            <td>运输方式</td>
                        </tr>
                    </thead>
                </table>
                <table cellspacing="0" cellpadding="0" class="table">
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="sm-bottom-tag"></div>
    </div>
    <script>
        $(function () {
            var changeSize = function () {
                const percentW = document.documentElement.clientWidth / 1920
                const percentH = document.documentElement.clientHeight / 1080
                $('#main-box')[0].style.transform = 'scale(' + percentW + ',' + percentH + ')'
            }

            window.addEventListener('resize', changeSize)

            changeSize()

            var getQueryString = function (name) {
                var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');
                var r = window.location.search.substr(1).match(reg);
                if (r != null) {
                    return unescape(r[2]);
                }
                return null;
            }
            var uscc = getQueryString('uscc') || ''
            var baseUrl = '/dg-trade-api/api'
            var _get = function (url, callback) { // 网络请求
                url = baseUrl + url+ "?uscc=" + uscc
                let token = null
                try {
                    token = window.parent.sessionStorage.getItem('VUEX_ST_TOKEN')
                } catch (e) { }

                $.ajax({
                    headers: {
                        'Authorization': token,
                        Source: 'PC',
                    },
                    url: url,
                    type: 'GET',
                    success: callback,
                    dataType: 'json',

                });
            }
            //地图标注图标
            let smMapTip1 = 'image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA+CAMAAABEH1h2AAAAAXNSR0IArs4c6QAAAihQTFRFAAAA////qv//gP//Zv//gP//bf//YP/fcf/jZv/mdP/oav/qYv/rbf/tZv/daf/ha//kYf/naP/cZP/eYP/fZv/gYv/iaP/jZP/kYf/lZv/dY//eZP/gYv/hZv/iY//jYP/dYP/fZP/gYf/hZf/hY//cYP/dZP/eYv/eYP/fX//cYv/dYP/dYv/gYf/gX//cYv/dY//eYP/fYf/cX//dYv/dYv/eYP/fYP/dX//dYP/eYv/eYf/fYP/dYP/eYv/eYP/dX//dYP/eYv/eYP/cYP/dYP/eX//cYf/cYf/dYP/dX//eYP/eX//cYP/dX//eYf/eX//cYP/dYP/dYf/dYP/eX//eYf/cYP/cX//dYP/eX//eYf/cX//dYP/dYf/dYf/cYP/dYP/dYP/dX//cYP/dX//dYP/dYP/dX//cYP/cX//cYP/dYP/dX//dYP/dYP/eYP/dYP/dYP/cX//cYP/dX//dYP/dYP/cX//cYP/dX//dYP/dYP/cYP/cX//dYP/dX//dYP/dYP/dX//cYP/cYP/cYP/dX//dYP/cX//cYP/dYP/dX//dX//cYP/cYP/dX//dYP/cX//cYP/dYP/dX//dYP/dX//cYP/cX//dYP/dYP/dX//dX//cYP/cX//dYP/dYP/dX//dYP/cX//cX//cYP/dX//dYP/dX//cYP/cX//cX//dX//dYP/dYP/cX//cYP/cX//cX//dYP/dX//dX//cqGudWgAAALd0Uk5TAAEDBAUGBwgJCgsMDQ4PERMVFhcYGRobHB0eHyEiIyQlKCkqKywtLi8wMzQ1OTo7PD5AQkNERkhKS01OT1JVVlpbXV5gYmVmZ2lqa21ucnN0dnd4eXp7fH1+goOEhoiJjI2PkJOUlpeYmZqbnJ2en6Clp6ipqqutsLGys7W3uLm6u7y9vr/AwsPFxsjKy8zN0tPV1tfY2drc3d7f4OHj5ebn6Onq6+zt7vDx8vP09vf4+fr7/P3+aPqrEAAAAtFJREFUSMe11/df00AYBvCHaYGigogDRESroDjBjQMHIoqToSgIuCeCKA5QFJxIceJgiYqCRWQoz7/nD21I75o0afz4/Phevr307k17AbQTviS75FJtfcP1y6U7lkYhoMwravpFr4w9PbbYrI3Ie06NvDo0xQS2F3ylTlxlsUZ6ay/9ZGBvsD8c+4AGaUvS16ldNMz3DD296SdNZCxPWx8Zp7mcDdHQpTSdao0lZwApkHW6d5e1lWikyeuCPxtFHd+jjo0Uh2iuTa5LvWbQ4T0S3KKOOB16O5PQqF710e41kK9OXRTip612qTdQoVbjfijFVof/np49cQNjCyeKpz2l4cJgw0cqR5nqzsTkyqpvU++n4r6Q83MmhlYq86d6CmVKIUvBlUM+rXpFeVbSlFKNZ9l7RT795JBmr1cliXzY/fOxliL/pNdrv20CZy4A4KrE+3R7NVLkDwEA3Vb5iA1AMq1yrgaw3To/Kj7nbv76s14iJF4NoE7mBvHiTgBO67wPQLt1Pix2SaCcocC3f+CRQKd1Ph4EvLTOXQAeWecdAC5Y540A9lvnpwCssc5zAESOyjzh4L44GUXvKVrgw+cCwBOJpw+S/SnSuaGLHN0g8W4AwGGJN5HkDZGXk2S7xM8BAGaNi/wdSbaIvJYkhyS+DOp0Kj9FkiUi30mSN0X+3jOWJXL7bbImXORBleN8Fi/yfGXshfw3EeO7X9EzpY37YlOGNlvZ9wNqqTlw/jZMLaW4W2e3Gb7OzTPhcz5oDTHBb8mnAwC4SJKsTzHCiVUkyQbpIBD62HNmMoj7qjeT5Y+N6TB/rOtP9r0tR69Z7Vql9bVmOM3pD/O1l8V2zYxunqq7rsXGh+oz/jY3s90/7tnif1/DCgf08VC53bCrogt1XqVcJ6aZepELzaob9jmW3c2OMP8aOSnj+L1OZR17msvX2xFwbImLlq9IS4rC/8tfOZ3Q+/RubQMAAAAASUVORK5CYII='
            let smMapTip2 = 'image://data:image/png;base64,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'
            let smMapTip3 = 'image://data:image/png;base64,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'
            let smMapTip4 = 'image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGqADAAQAAAABAAAAGgAAAABMybYKAAAE5klEQVRIDc1Vb0xbVRQ/97W8ttBCaeeAUQEdI25IAmHgtjjNnMumi4nGmZgli18WdAFJNhcTs8yY6AcSE404MqdGF3UfjMs0McGxuGyYCC6Mf3MbcxtuOAcItNDR0lL67vWc+3orxULwm+flvXPv+fe759x77mOwDBJdR6vAAs+B4E8CsCIQwgOMBQDEHyDYWXxPsZp9vUuFYkspxYUjZWC1vI2BnwImGAYUkqd3aoW4OMweabieTr0okOg68jRoWgtmkZXO8V8yhqEEhHFR9aymoXWhPi2Q6G7ZgU4fkyeWKuGjxsTT0Hy1xupYdf3p+VYqSlKGIKW4qpMocKTgYN0QFMMRR1JlJE5EUgXGIIKCXQh2U+rwY1WDJOfiIHpouNlRM2giUDKzxNokw09iKv3VGHcS56/hu0/FVSo5Fxc/rMBVfaqUKRyPAj4MHzMDNTaDppgmJwz2svWv/krzBRmJR1GGaRPRGgQc/uSs76u2nkIpmvcp8LqiHcde6Se73W99XdZ5eSh3S/Vq/2dvPD9omgkBnG3GcRogLh7Gk4YlU8SgttznP97aXTgRDNsrSwsCzz6+boS0+R5XbGPdRxW+/JyZkfFpfTQQsmfq1lncX3OhGi5U8HIVSVMDyRlzomE08UaIt/cOZhFIVqYea9i14dqJM32rTrT1Fdau9Y1f+n3UbdW0uTvjQTv5lxTkBjHBqHwJkDGXip9aOiEsWAozI4apC8Y+b+1ZQ8bhmZi+t+nbTcrx+45r2ZwLrcDrvDc+GS4m+QM+D94WzMxIyNOZTCQViGljIIxcGQwPHsfnzZee6LDrVuOn/lv5OU5HzJvtiGba9fhczJAHCS+MmBBojLSueKUf/f8pPWOTMhZ+UoE4/xNlDqnEjG4PTzpC0VljYGjMdar9qqz3nh1VXcV51sj4VFjazRk8TvZWixZfW7wigGsziaA5UDxJqUDA+7Cu90sNHuOT568UvXP8/NaErWRfnu6tocG2mgfxxAEYhjFH3JuTGQSeOAgkkICij4ZEyRrKmQ49KArJOhs8enD35kvBHw41vbi1op30LoctFGw71ESvPxi103x0MmQj3crcrIBscmp0+WphkPFIu6B0rGr/lOj44GfQRC31R2f/UG7Pjbve7uvDPjLmgrPtB77Y7s22T1c/tOpmZWne4IWBu6tJl+dxTuB5ptvEbOi41sVq90+Rjig1I5Lcx87hlTYMjEfq3v3umdePntkz9Few0O2y+90uhz8wHbV73c5Ac+POdpueEb5ya6wML26+pbJkAPsbWwKwl2BExqF4CZInR00UF73vu2GOvfDb0ITHt8I1iz1kmGuiwqu1cei8esdtxLmW73ZGS4u8M9KfypYhvqHqqHjE0wKRQnS85wHNshNEXDYj3hh4pXAmORksJNJZLBGI81a26QD2UyotCkRmMrMY24Zlt4PGEQjvFeKSsLcBE8V/vCSO+2ODHxdmYiqXyEgZiF+as3G/HpNgSkjcQBALghDnYhYybO1sQ+O9+Sbzx0tmpAzFuRYnZEQ2QoZFBwNLRKQS0hDE5ehk5fXYFovTsoDIXVw8lglGuBoMoctw1Oocb2urvYetf9k8CFKR/rNsIHLHA4K/d46/Eq4D12NY0su48Yn/V3oAJf1PQBLsRrMNpngJuLXbbE3jrAr0v+F/A/G473gYxIwGAAAAAElFTkSuQmCC'
            //夹角计算
            const getAngle = ({ x: x1, y: y1 }, { x: x2, y: y2 }) => {
                const dot = x1 * x2 + y1 * y2
                const det = x1 * y2 - y1 * x2
                const angle = Math.atan2(det, dot) / Math.PI * 180
                return (angle + 360) % 360
            }
            //渲染轨迹
            let mapline = $('#content-map-detail')[0];
            var mapLineDiv = echarts.init(mapline);
            //91371100056216898D 晋瑞
            _get('/data/screen/getTraceInfos', function (res) {
                if (res.success && res.result.length) {

                    var MyMarhq2 = '';
                    clearInterval(MyMarhq2);
                    let i = 0;
                    MarqueehqMap();
                    function MarqueehqMap() {
                        if (i < res.result.length - 1) {
                            i++;
                        } else {
                            i = 0;
                        }
                        let info = res.result[i];
                        let waybillStationTraceInfo = [], waybillStationTraceInfoLoc = {
                            L: [],
                            R: [],
                            T: [],
                            B: [],
                        };
                        let maplineData = [];
                        let widthList = [], heightList = [];//统计坐标带范围值
                        info.waybillStationTraceInfoList.forEach((item) => {
                            //保证前后两个坐标不重复
                            if ((!waybillStationTraceInfo.length) || item.stationName !== waybillStationTraceInfo[waybillStationTraceInfo.length - 1].name) {
                                let value = [Number(item.longitude), Number(item.latitude)]
                                waybillStationTraceInfo.push({
                                    name: item.stationName,
                                    value: value
                                })

                            }
                        });
                        waybillStationTraceInfo.forEach((item, index) => {
                            widthList.push(item.value[0]);
                            heightList.push(item.value[1]);
                            let value = item.value
                            let loc = "L"//文字位置
                            switch (index) {
                                case 0:
                                    //第一个点位置,如果下一个点的坐标在当前的右侧，则文字展示在左侧
                                    if (waybillStationTraceInfo[index + 1] && (waybillStationTraceInfo[index + 1].value[0] > value[0])) {
                                        loc = "L"
                                    } else {
                                        loc = "R"
                                    }
                                    break;
                                case waybillStationTraceInfo.length - 1:
                                    //最后一个点位置如果上一个点的坐标在当前的右侧，则文字展示在左侧
                                    if (waybillStationTraceInfo[index - 1].value[0] > value[0]) {
                                        loc = "L"
                                    } else {
                                        loc = "R"
                                    }
                                    break;
                                default:
                                    //其他点位置
                                    //根据夹角计算所属象限
                                    let angle1 = getAngle({ x: 0, y: 1 }, { x: waybillStationTraceInfo[index - 1].value[0] - value[0], y: waybillStationTraceInfo[index - 1].value[1] - value[1] })
                                    let angle = getAngle({ x: waybillStationTraceInfo[index - 1].value[0] - value[0], y: waybillStationTraceInfo[index - 1].value[1] - value[1] }, { x: waybillStationTraceInfo[index + 1].value[0] - value[0], y: waybillStationTraceInfo[index + 1].value[1] - value[1] })
                                    if (angle < 180) {
                                        angle1 = angle1 + angle * 0.5 + 180
                                    } else {
                                        angle1 = angle1 + angle * 0.5
                                    }
                                    let aa = Math.round(angle1 % 360 / 90);
                                    switch (aa) {
                                        case 1:
                                            loc = "L";
                                            break;
                                        case 2:
                                            loc = "B";
                                            break;
                                        case 3:
                                            loc = "R";
                                            break;
                                        default:
                                            loc = "T";
                                    }
                            }
                            waybillStationTraceInfoLoc[loc].push({
                                name: item.name,
                                value: value
                            })
                            maplineData.push(value)
                        })
                        let widthLine = Math.max(...widthList) - Math.min(...widthList);
                        let heightLine = Math.max(...heightList) - Math.min(...heightList);
                        let zoom = 3;//地图加载比例；
                        zoom = Math.round(20 / (widthLine > heightLine ? widthLine : heightLine));
                        let center = [maplineData.reduce((prev, next) => {
                            return prev + next[0];
                        }, 0) / maplineData.length, maplineData.reduce((prev, next) => {
                            return prev + next[1];
                        }, 0) / maplineData.length]
                        let optionline = {
                            geo: {
                                map: "china",
                                aspectScale: 0.9, //长宽比
                                zoom: zoom,
                                roam: false,
                                center,
                                label: {
                                    normal: {
                                        show: false,
                                        color: "#ffffff"
                                    },
                                },
                                itemStyle: {
                                    areaColor: "RGBA(4, 57, 78, 1)",
                                    borderColor: "RGBA(140, 215, 255, 1)",
                                    shadowColor: 'rgba(231, 255, 202, 0.5)',
                                    shadowBlur: 50
                                },
                            },
                            legend: {
                                orient: "vertical",
                                id: 1,
                                top: "40px",
                                right: "0",
                                itemGap: 10,
                                height: 20,
                                itemWidth: 20,
                                itemHeight: 20,
                                data: [
                                    {
                                        name: "发站",
                                        // icon: smMapTip3,
                                        textStyle: {
                                            fontSize: 14,
                                            padding: [0, 0, 0, 5],
                                            color: "#FFFFFF"
                                        },
                                    },
                                    {
                                        name: "到站",
                                        // icon: smMapTip4,
                                        textStyle: {
                                            fontSize: 14,
                                            padding: [0, 0, 0, 5],
                                            color: "#FFFFFF"
                                        },
                                    },
                                ],
                            },
                            series: [
                                {
                                    type: `map`,
                                    map: `china`,
                                    aspectScale: 0.9, //长宽比
                                    zoom: zoom,
                                    center,
                                    roam: false,
                                    itemStyle: {
                                        normal: {
                                            areaColor: "RGBA(4, 57, 78, 1)",
                                            borderColor: "RGBA(140, 215, 255, 1)",
                                        },
                                        emphasis: {
                                            areaColor: "RGBA(4, 57, 78, 1)",
                                            borderColor: "RGBA(140, 215, 255, 1)",
                                            label: {
                                                show: false,
                                            },
                                        },
                                    },
                                },
                                {
                                    type: "lines",
                                    polyline: true,
                                    lineStyle: {
                                        color: 'rgba(231, 255, 202, 1)',
                                        width: 2,
                                        cap: "round",
                                        opacity: 0.9,
                                        shadowColor: 'rgba(231, 255, 202, 0.5)',
                                        shadowBlur: 15
                                    },
                                    label: {
                                        show: true,
                                    },
                                    symbol: 'circle',
                                    symbolSize: 14,
                                    data: [{
                                        coords: maplineData
                                    }],
                                    z: 10
                                }, {
                                    name: "中间站上",
                                    type: "scatter",
                                    symbolSize: 6,
                                    coordinateSystem: "geo",
                                    itemStyle: {
                                        color: 'rgba(231, 255, 202, 1)',
                                        opacity: 1,
                                    },
                                    label: {
                                        formatter: "{b}",
                                        position: "top",
                                        fontSize: 8,
                                        lineHeight: 10,
                                        fontWeight: 400,
                                        fontFamily: "PingFangSC-Medium, PingFang SC",
                                        color: "#FFF",
                                        show: true,
                                    },
                                    data: waybillStationTraceInfoLoc.T,
                                    z: 20
                                }, {
                                    name: "中间站下",
                                    type: "scatter",
                                    symbolSize: 6,
                                    coordinateSystem: "geo",
                                    itemStyle: {
                                        color: 'rgba(231, 255, 202, 1)',
                                        opacity: 1,
                                    },
                                    label: {
                                        formatter: "{b}",
                                        position: "bottom",
                                        fontSize: 8,
                                        lineHeight: 10,
                                        fontWeight: 400,
                                        fontFamily: "PingFangSC-Medium, PingFang SC",
                                        color: "#FFF",
                                        show: true,
                                    },
                                    data: waybillStationTraceInfoLoc.B,
                                    z: 20
                                }, {
                                    name: "中间站右",
                                    type: "scatter",
                                    symbolSize: 6,
                                    coordinateSystem: "geo",
                                    itemStyle: {
                                        color: 'rgba(231, 255, 202, 1)',
                                        opacity: 1,
                                    },
                                    label: {
                                        formatter: "{b}",
                                        position: "right",
                                        fontSize: 8,
                                        lineHeight: 10,
                                        fontWeight: 400,
                                        fontFamily: "PingFangSC-Medium, PingFang SC",
                                        color: "#FFF",
                                        show: true,
                                    },
                                    data: waybillStationTraceInfoLoc.R,
                                    z: 20
                                }, {
                                    name: "中间站左",
                                    type: "scatter",
                                    symbolSize: 6,
                                    coordinateSystem: "geo",
                                    itemStyle: {
                                        color: 'rgba(231, 255, 202, 1)',
                                        opacity: 1,
                                    },
                                    label: {
                                        formatter: "{b}",
                                        position: "left",
                                        fontSize: 8,
                                        lineHeight: 10,
                                        fontWeight: 400,
                                        fontFamily: "PingFangSC-Medium, PingFang SC",
                                        color: "#FFF",
                                        show: true,
                                    },
                                    data: waybillStationTraceInfoLoc.L,
                                    z: 20
                                }, {
                                    name: "发站",
                                    type: "scatter",
                                    coordinateSystem: "geo",
                                    label: {
                                        show: false,
                                    },
                                    data: [waybillStationTraceInfo[0]],
                                    symbol: smMapTip3,
                                    symbolSize: [16, 16],
                                    symbolOffset: [0, '-70%'],
                                    itemStyle: {
                                        opacity: 1
                                    },
                                    z: 30
                                }, {
                                    name: "到站",
                                    type: "scatter",
                                    coordinateSystem: "geo",
                                    label: {
                                        show: false,
                                    },
                                    data: [waybillStationTraceInfo[waybillStationTraceInfo.length - 1]],
                                    symbol: smMapTip4,
                                    symbolSize: [16, 16],
                                    symbolOffset: [0, '-70%'],
                                    itemStyle: {
                                        opacity: 1
                                    },
                                    z: 30
                                }
                            ],
                        };
                        mapLineDiv.clear();
                        mapLineDiv.setOption(optionline);

                        var MyMarhq1 = '';
                        clearInterval(MyMarhq1);
                        // 发收站信息
                        $('#batchNo').empty();
                        $('#batchNo').append(info.batchNo);
                        $('#detailTitle').empty();
                        let detailTitle = "";
                        detailTitle += `<div>${info.deliveryStation}-${info.arriveStation}</div>` +
                            `<div>${info.deliverDate}</div>` +
                            `<div>${info.deliverQuantity}吨</div>`
                        $('#detailTitle').append(detailTitle);
                        //内容超出高度后滚动轮播
                        let detailTitleWidth = $('#detailTitle').outerWidth()
                        let contentDetailMainWidth = $('.content-map-detail-title').outerWidth()
                        if (detailTitleWidth > contentDetailMainWidth) {
                            $('.content-map-detail-title').css('left', '0');
                            let left = 0;
                            let speedhq = 50; // 数值越大越慢
                            let outerwidth = contentDetailMainWidth - detailTitleWidth
                            function MarqueehqWidth() {
                                if (left <= outerwidth) {
                                    left = 0;
                                } else {
                                    left -= 1;
                                }
                                $('.content-map-detail-title').css('left', left + 'px');
                            }
                            MyMarhq1 = setInterval(MarqueehqWidth, speedhq);
                        }
                    }
                    MyMarhq2 = setInterval(MarqueehqMap, 5000);
                }
            })
            //渲染地图
            let map = $('#content-map')[0];
            let option = {
                geo: {
                    map: "china",
                    aspectScale: 0.9, //长宽比
                    zoom: 1.05,
                    roam: false,
                    label: {
                        normal: {
                            show: true,
                            color: "#04A3BF"
                        },
                    },
                    itemStyle: {
                        normal: {
                            areaColor: "rgba(37, 142, 217, 0.3)",
                            borderColor: "#04A3BF",
                        },
                        emphasis: {
                            areaColor: "rgba(37, 142, 217, 0.3)",
                            borderColor: "#04A3BF",
                            // color: "green",
                            label: {
                                show: false,
                            },
                        },
                    },
                },
                legend: {
                    orient: "vertical",
                    id: 1,
                    bottom: "20%",
                    left: "10%",
                    height: 60,
                    itemGap: 20,
                    itemWidth: 20,
                    itemHeight: 20,
                    data: [
                        {
                            name: "站台",
                            icon: smMapTip1,
                            textStyle: {
                                fontSize: 16,
                                padding: [0, 0, 0, 10],
                                color: "#7AFFFD"
                            }
                        },
                        {
                            name: "港口",
                            icon: smMapTip2,
                            textStyle: {
                                fontSize: 16,
                                padding: [0, 0, 0, 10],
                                color: "#FFDE2F"
                            }
                        },
                        {
                            name: "发站",
                            // icon: smMapTip3,
                            textStyle: {
                                fontSize: 16,
                                padding: [0, 0, 0, 10],
                                color: "#FFFFFF"
                            },
                        },
                        {
                            name: "到站",
                            // icon: smMapTip4,
                            textStyle: {
                                fontSize: 16,
                                padding: [0, 0, 0, 10],
                                color: "#FFFFFF"
                            },
                        },
                    ],
                },
                series: [
                    {
                        type: "effectScatter",
                        coordinateSystem: "geo",
                        showEffectOn: "render",
                        zlevel: 1,
                        rippleEffect: {
                            period: 15,
                            scale: 4,
                            brushType: "fill",
                        },
                        hoverAnimation: true,
                        label: {
                            normal: {
                                formatter: "{b}",
                                position: "right",
                                offset: [15, 0],
                                color: "#1DE9B6",
                                show: true,
                            },
                        },
                        itemStyle: {
                            normal: {
                                color: "#fff",
                                shadowBlur: 5,
                                shadowColor: "#333",
                            },
                        },
                        symbolSize: 12,
                        data: [],
                    }, //地图线的动画效果
                    {
                        type: "lines",
                        zlevel: 2,
                        effect: {
                            show: true,
                            period: 1,
                            trailLength: 0.7,
                            color: '#fff',
                            symbolSize: 3
                        },
                        lineStyle: {
                            normal: {
                                color: '#00BFFF',
                                width: 0,
                                curveness: 0.2
                            }
                        },
                        data: [],
                    }, {
                        name: "站台",
                        type: "scatter",
                        coordinateSystem: "geo",
                        label: {
                            formatter: "{b}",
                            position: "bottom",
                            fontSize: 8,
                            lineHeight: 10,
                            fontFamily: "PingFangSC-Medium, PingFang SC",
                            color: "#7AFFFD",
                            show: true,
                        },
                        data: [],
                        symbol: smMapTip1,
                        symbolSize: [16, 16],
                        itemStyle: {
                            opacity: 1
                        },
                        z: 10
                    }, {
                        name: "港口",
                        type: "scatter",
                        coordinateSystem: "geo",
                        label: {
                            formatter: "{b}",
                            position: "bottom",
                            fontSize: 8,
                            lineHeight: 10,
                            fontFamily: "PingFangSC-Medium, PingFang SC",
                            color: "#FFDE2F",
                            show: true,
                        },
                        data: [],
                        symbol: smMapTip2,
                        symbolSize: [16, 16],
                        itemStyle: {
                            opacity: 1
                        },
                        z: 10
                    }, {
                        name: "发站",
                        type: "scatter",
                        coordinateSystem: "geo",
                        label: {
                            formatter: "{b}",
                            position: "bottom",
                            fontSize: 8,
                            lineHeight: 10,
                            fontFamily: "PingFangSC-Medium, PingFang SC",
                            color: "#ffffff",
                            show: true,
                        },
                        data: [],
                        symbol: smMapTip3,
                        symbolSize: [16, 16],
                        itemStyle: {
                            opacity: 1
                        },
                        z: 10
                    }, {
                        name: "到站",
                        type: "scatter",
                        coordinateSystem: "geo",
                        label: {
                            formatter: "{b}",
                            position: "bottom",
                            fontSize: 8,
                            lineHeight: 10,
                            fontFamily: "PingFangSC-Medium, PingFang SC",
                            color: "#ffffff",
                            show: true,
                        },
                        data: [],
                        symbol: smMapTip4,
                        symbolSize: [16, 16],
                        itemStyle: {
                            opacity: 1
                        },
                        z: 10
                    }
                ],
            };
            var mapDiv = echarts.init(map);
            mapDiv.setOption(option);
            //大屏站点数据
            _get('/data/screen/getScreenData', function (res) {
                if (res.success) {
                    let arriveStationList = [],//到站
                        departureStationList = [],//发站
                        platformList = [],//站台
                        portList = [];//港口
                    arriveStationList = res.result.arriveStationList.map(item => {
                        return { name: item.name, value: [item.longitude, item.latitude] }
                    })
                    departureStationList = res.result.departureStationList.map(item => {
                        return { name: item.name, value: [item.longitude, item.latitude] }
                    })
                    platformList = res.result.platformList.map(item => {
                        return { name: item.name, value: [item.longitude, item.latitude] }
                    })
                    portList = res.result.portList.map(item => {
                        return { name: item.name, value: [item.longitude, item.latitude] }
                    })
                    option.series[2].data = platformList;
                    option.series[3].data = portList;
                    option.series[4].data = departureStationList;
                    option.series[5].data = arriveStationList;
                    mapDiv.setOption(option);
                }
            })
            //大屏物流数据
            _get('/data/screen/logistics/data', function (result) {
                if(!result.success){
                    return
                }
                var res = result.data||{};
                let mapData = {
                    line: [],
                    data: [],
                }
                if (res.coordinateList && res.coordinateList.length > 0) {
                    res.coordinateList.forEach(item => {
                        mapData.line.push({
                            coords: [[item.deliveryStation.longitude, item.deliveryStation.latitude], [item.arriveStation.longitude, item.arriveStation.latitude]]
                        })
                        mapData.data.push([item.arriveStation.longitude, item.arriveStation.latitude])
                    })
                }
                //到站标记不再展示
                // option.series[0].data = mapData.data;
                option.series[1].data = mapData.line;
                mapDiv.setOption(option);
                var MyMarhq = '';
                clearInterval(MyMarhq);
                if (res.transGoodsDetailList && res.transGoodsDetailList.length) {
                    $('.content-table tbody').empty();
                    let str = "";
                    res.transGoodsDetailList.forEach(item => {
                        str += "<tr><td>"
                        str += item.deliveryStation
                        str += "</td><td>"
                        str += item.arriveStation
                        str += "</td><td>"
                        str += item.deliverQuantity
                        str += "</td><td>"
                        str += item.despatchTypeDesc
                        str += "</td></tr>"
                    })
                    $('.content-table tbody').append(str);
                    //内容超出高度后滚动轮播
                    let tblBodyHeight = $('.content-table .table').outerHeight()
                    let tableInnerHeight = $('.content-table').outerHeight()
                    if (tblBodyHeight > tableInnerHeight) {
                        $('.content-table tbody').css('top', '0');
                        let tblTop = 0;
                        let speedhq = 50; // 数值越大越慢
                        let outerHeight = tableInnerHeight - tblBodyHeight - 50
                        function Marqueehq() {
                            if (tblTop <= outerHeight) {
                                tblTop = 0;
                            } else {
                                tblTop -= 1;
                            }
                            $('.content-table tbody').css('top', tblTop + 'px');
                        }
                        MyMarhq = setInterval(Marqueehq, speedhq);
                    }
                }
            })
        })
    </script>
</body>

</html>